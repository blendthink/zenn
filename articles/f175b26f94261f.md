---
title: "Slack æ–°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã‚¢ãƒ—ãƒªã‚’é–‹ç™ºã—ã¦ã¿ã‚ˆã†"
emoji: "ğŸ¥³"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["slack", "deno"]
published: true
---

:::message
ã€Œè¨˜å¿µæ—¥ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ä»¥é™ã¯ç¾åœ¨åŸ·ç­†ä¸­ã§ã™ã€‚
:::

## ã¯ã˜ã‚ã«

Slack æ–°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®é–‹ç™ºè€…ç”¨ã‚ªãƒ¼ãƒ—ãƒ³ãƒ™ãƒ¼ã‚¿ç‰ˆãŒåˆ©ç”¨å¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚

https://slack.com/intl/ja-jp/blog/developers/make-work-flow-faster-with-slacks-new-platform

https://deno.com/blog/slack-open-beta

é–‹ç™ºè€…ä½“é¨“ãŒæ ¼æ®µã«å‘ä¸Šã—ã¦ã„ã‚‹ã‚ˆã†ã§ã€å€‹äººçš„ã«æœ‰æ–™ãƒ—ãƒ©ãƒ³ã§ Slack ã‚’å¥‘ç´„ã—ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã€ã›ã£ã‹ããªã®ã§ã€ä»¥å‰ä½œæˆã—ã¦ã„ãŸ Slack ã‚¢ãƒ—ãƒªã‚’æ›¸ãç›´ã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

:::message
ä»Šã®ã¨ã“ã‚ã€ä½œæ¥­ã§ãã‚‹æœ‰æ–™ãƒ—ãƒ©ãƒ³ã® Slack ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãŒå¿…è¦ã§ã™ã€‚
:::

### Slack æ–°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ç‰¹å¾´

- æ©Ÿèƒ½ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã™ã‚‹ãŸã‚ã®é–¢æ•°ã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
- Slack CLI ã‚’ä½¿ç”¨ã—ã¦ã€é–¢æ•°ã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç°¡å˜ã«é–‹ç™ºã€ãƒ†ã‚¹ãƒˆã€ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ ãƒ“ãƒ«ãƒ€ãƒ¼ã§æ©Ÿèƒ½ã‚’ãƒªãƒŸãƒƒã‚¯ã‚¹ãŠã‚ˆã³å†çµåˆã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

### Slack CLI ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

- ã‚¢ãƒ—ãƒªã®é–‹å§‹ç‚¹ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- ã‚½ã‚±ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º
- Slack ã®ã‚ã‚‰ã‚†ã‚‹é–¢æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç°¡å˜ã«ä¿å­˜ãƒ»ç®¡ç†ã§ãã‚‹æ©Ÿèƒ½

## Slack ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰

ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€å€‹äººçš„ãªä½œæ¥­ãƒ¡ãƒ¢ã‚’æ®‹ã—ã¦ã„ã¾ã™ã€‚

ã¿ãªã•ã‚“ã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã”è¦§ãã ã•ã„ã€‚

https://api.slack.com/future/quickstart

### 0. å‰ææ¡ä»¶

```shell
sw_vers
# ProductName:    macOS
# ProductVersion: 13.2
# BuildVersion:   22D49
```

### 1. Slack CLI ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

ã“ã‚Œã«ã‚ˆã‚Šã€Slack CLI ã¨ã€Deno ã‚’å«ã‚€ã™ã¹ã¦ã®å¿…è¦ãªä¾å­˜é–¢ä¿‚ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚

```shell
curl -fsSL https://downloads.slack-edge.com/slack-cli/install.sh | bash

slack --version
# Using slack v1.18.0

deno --version
# deno 1.30.2 (release, aarch64-apple-darwin)
# v8 10.9.194.5
# typescript 4.9.4
```

### 2. CLI ã‚’æ‰¿èªã™ã‚‹

:::message alert
Mac æ¨™æº–ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œã—ãªã„ã¨ã€æ„å›³ã—ãªã„å‹•ä½œã‚’ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
ä»¥é™ã®ã‚³ãƒãƒ³ãƒ‰ã¯ Mac æ¨™æº–ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚
:::

```shell
slack login
```

ã‚¿ãƒ¼ãƒŸãƒŠãƒ« ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«ã€æ¬¡ã®ã‚ˆã†ãªæ–‡å­—åˆ—ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚
ã“ã‚Œã‚’é–‹ç™ºã™ã‚‹ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã® Slack ãƒãƒ£ãƒ³ãƒãƒ« or DM ã«è²¼ã‚Šä»˜ã‘ã¦é€ä¿¡ã—ã¾ã™ã€‚

```shell
/slackauthticket xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

ã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ãªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã« Challenge Code ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ãã‚Œã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ Enter ã‚’æŠ¼ã—ã¾ã™ã€‚

![](/images/f175b26f94261f/challenge_code.png)

```shell
? Enter challenge code xxxxxxxx

# âœ… You've successfully authenticated! ğŸ‰ 
#    Authorization data was saved to /Users/blendthink/.slack/credentials.json
```

CLI ãŒæ‰¿èªã•ã‚ŒãŸã‹ç¢ºèªã—ã¾ã™ã€‚

```shell
slack auth list
# [ACTIVE] blendthink (Team ID: xxxxxxxxx)
# User ID: Xxxxxxxx
# Last update: 2023-02-18 22:42:53 +09:00
#
# To change your active workspace authorization run slack login
```

### 3. Slack ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹

```shell
cd {Slack ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹å ´æ‰€ã®ãƒ‘ã‚¹}

slack create anniversary-slack-app
# ? Select a template to build from:
# 
# > Hello World
#   A simple workflow that sends a greeting
# 
#   Scaffolded project
#   A solid foundation to start building upon
# 
#   Blank project
#   A, well.. blank project
# 
#   To see all available samples, visit github.com/slack-samples.
```

ä»Šå›ã¯ Hello World ã‚’é¸æŠã—ã¾ã—ãŸã€‚

```shell
# ? Select a template to build from: Hello World
# 
# Creating new Slack app at {Slack ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹å ´æ‰€ã®ãƒ‘ã‚¹}/anniversary-slack-app
# 
# ğŸ“¦ Installed project dependencies
# 
# âœ¨ anniversary-slack-app successfully created
# 
# ğŸ§­ Explore your project's README.md for documentation and code samples, and at any time run slack help to display a list of available commands
# 
# ğŸ§‘â€ğŸš€ Follow the steps below to try out your new project
# 
# 1ï¸âƒ£  Change into your project directory with: cd anniversary-slack-app
# 
# 2ï¸âƒ£  Develop locally and see changes in real-time with: slack run
# 
# 3ï¸âƒ£  When you're ready to deploy for production use: slack deploy
# 
# ğŸ”” If you leave the workspace, you wonâ€™t be able to manage any apps youâ€™ve deployed to it. Apps you deploy will belong to the workspace even if you leave the workspace
```

ä½œæˆã•ã‚ŒãŸã‚¢ãƒ—ãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦ã€ä¸­èº«ã‚’ç¢ºèªã—ã¾ã™ã€‚

```shell
cd {Slack ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹å ´æ‰€ã®ãƒ‘ã‚¹}/anniversary-slack-app

brew install tree
tree --version
# tree v2.0.4 (c) 1996 - 2022 by ...

tree -a
# .
# â”œâ”€â”€ .github
# â”‚   â””â”€â”€ workflows
# â”‚       â””â”€â”€ deno.yml
# â”œâ”€â”€ .gitignore
# â”œâ”€â”€ .vscode
# â”‚   â””â”€â”€ settings.json
# â”œâ”€â”€ LICENSE
# â”œâ”€â”€ README.md
# â”œâ”€â”€ assets
# â”‚   â””â”€â”€ icon.png
# â”œâ”€â”€ deno.jsonc
# â”œâ”€â”€ functions
# â”‚   â”œâ”€â”€ greeting_function.ts
# â”‚   â””â”€â”€ greeting_function_test.ts
# â”œâ”€â”€ import_map.json
# â”œâ”€â”€ manifest.ts
# â”œâ”€â”€ slack.json
# â”œâ”€â”€ triggers
# â”‚   â””â”€â”€ greeting_trigger.ts
# â””â”€â”€ workflows
#     â””â”€â”€ greeting_workflow.ts
# 
# 7 directories, 14 files
```

å¿…è¦ãª `.gitignore` ã®è¨­å®šã¯ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã“ã®çŠ¶æ…‹ã§ã„ã£ãŸã‚“ GitHub Repository ã‚’ä½œæˆã—ã¦ PUSH ã—ã¦ãŠãã¾ã™ã€‚

```shell
git init
git add .
git commit -m "initial commit"
git branch -M main

brew install gh
gh --version
# gh version 2.16.1 (2022-09-26)
# https://github.com/cli/cli/releases/tag/v2.16.1

gh auth login
# ? What account do you want to log into? GitHub.com
# ? What is your preferred protocol for Git operations? HTTPS
# ? Authenticate Git with your GitHub credentials? Yes
# ? How would you like to authenticate GitHub CLI? Login with a web browser
# 
# ! First copy your one-time code: xxxx-xxxx
# Press Enter to open github.com in your browser... 
# âœ“ Authentication complete.
# - gh config set -h github.com git_protocol https
# âœ“ Configured git protocol
# âœ“ Logged in as blendthink

gh repo create anniversary-slack-app --public --source=. --remote=origin --push
# âœ“ Created repository blendthink/anniversary-slack-app on GitHub
# âœ“ Added remote https://github.com/blendthink/anniversary-slack-app.git
# âœ“ Pushed commits to https://github.com/blendthink/anniversary-slack-app.git
```

### 4. ã‚¢ãƒ—ãƒªã®ãƒˆãƒªã‚¬ãƒ¼ã‚’ä½œæˆã™ã‚‹

```shell
slack trigger create --trigger-def "triggers/greeting_trigger.ts"
# ? Choose an app  [Use arrows to move, type to filter]
#   anniversary-slack-app
#    App ID: N/A  Status: Not installed
#    Workspace: blendthink  Team ID: xxxxxxxxxxx
# 
# > anniversary-slack-app  (dev) 
#    App ID: N/A  Status: Not installed
#    Workspace: blendthink  Team ID: xxxxxxxxxxx
```

(dev) ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹æ–¹ãŒé–‹ç™ºä¸­ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãªã®ã§ã€ãã‚Œã‚’é¸æŠã—ã¾ã™ã€‚

```shell
# ? Choose an app anniversary-slack-app  (dev) 
#    App ID: N/A  Status: Not installed
#    Workspace: blendthink  Team ID: xxxxxxxxxxx
# 
# 
# ğŸ“š App Manifest
#    Created app manifest for "anniversary-slack-app (dev)" in "blendthink" workspace
# 
# ğŸ  Workspace Install
#    Installed "anniversary-slack-app (dev)" app to "blendthink" workspace
#    Finished in 1.7s
# 
# âš¡ Trigger created
#    Trigger ID:   xxxxxxxxxxxx
#    Trigger Type: shortcut
#    Trigger Name: Send a greeting
#    URL: https://slack.com/shortcuts/xxxxxxxxxxxx/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

URL ã¯æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§å¿…è¦ã«ãªã‚‹ã®ã§ã€ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã™ã€‚

ã¾ãŸã€`.slack/apps.json` ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã‚³ãƒŸãƒƒãƒˆã—ã¦ãŠãã¾ã™ã€‚

```shell
git add .slack/apps.json
git commit -m "Add .slack/apps.json"
git push
```

### 5. ã‚¢ãƒ—ãƒªã‚’ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œã™ã‚‹

```shell
slack run
# ? Choose a workspace  [Use arrows to move, type to filter]
# > blendthink  Team ID: xxxxxxxxxxx 
#    App ID: xxxxxxxxxxx  Status: Installed
```

ã‚¢ãƒ—ãƒªãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’é¸æŠã—ã¾ã™ã€‚

```shell
# ? Choose a workspace blendthink  Team ID: xxxxxxxxxxx 
#    App ID: xxxxxxxxxxx  Status: Installed
# 
# Updating dev app install for workspace "blendthink"
# âœ¨  blendthink
# Connected, awaiting events
```

å‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã® URL ã‚’ã€Slack ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒãƒ£ãƒ³ãƒãƒ«ã«æŠ•ç¨¿ã—ã¾ã™ã€‚

![](/images/f175b26f94261f/post_url.png)

æŠ•ç¨¿ã—ãŸãƒãƒ£ãƒ³ãƒãƒ«ã«ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€Œå®Ÿè¡Œã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

![](/images/f175b26f94261f/show_shortcut.png)

ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ãƒãƒ£ãƒ³ãƒãƒ«ã‚’é¸æŠã—ã€æŠ•ç¨¿ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¾ã™ã€‚

![](/images/f175b26f94261f/show_modal.png)

ã€ŒSend greetingã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€æŒ‡å®šã—ãŸãƒãƒ£ãƒ³ãƒãƒ«ã«ã‚ã„ã•ã¤ãŒæŠ•ç¨¿ã•ã‚Œã¾ã™ã€‚

![](/images/f175b26f94261f/hello_world.png)

## è¨˜å¿µæ—¥ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹

åŸ·ç­†ä¸­...

## ãŠã‚ã‚Šã«

åŸ·ç­†ä¸­...

### å‚è€ƒ

https://api.slack.com/future

https://github.com/slackapi/deno-slack-sdk

http://mama.indstate.edu/users/ice/tree/

https://cli.github.com/manual

https://deno.land
